<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Life Simulator</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            color: #333;
        }

        #app {
            width: 100%;
            max-width: 500px;
            padding: 20px;
        }

        .screen {
            display: none;
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
        }

        .screen.active {
            display: block;
        }

        h1 {
            text-align: center;
            margin-bottom: 40px;
            color: #667eea;
            font-size: 36px;
        }

        .gender-select {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin-bottom: 30px;
        }

        .btn {
            padding: 20px 40px;
            font-size: 18px;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
            box-shadow: 0 4px 10px rgba(0,0,0,0.15);
        }

        .btn:hover {
            transform: scale(1.05);
        }

        .btn-male {
            background: #4da6ff;
            color: white;
        }

        .btn-male:hover {
            background: #3d85cc;
        }

        .btn-female {
            background: #ff6b9d;
            color: white;
        }

        .btn-female:hover {
            background: #cc557a;
        }

        .btn-confirm {
            background: #4CAF50;
            color: white;
            width: 100%;
            margin-top: 15px;
        }

        .btn-confirm:hover {
            background: #45a049;
        }

        .name-input {
            margin-top: 20px;
            display: none;
        }

        #character-name {
            width: 100%;
            padding: 15px;
            font-size: 18px;
            border: 2px solid #ddd;
            border-radius: 10px;
            text-align: center;
            margin-bottom: 15px;
            font-family: inherit;
        }

        .header {
            text-align: center;
            margin-bottom: 20px;
        }

        #character-name-display {
            font-size: 28px;
            color: #667eea;
            margin-bottom: 5px;
        }

        #character-age, #character-stage {
            color: #666;
            font-size: 16px;
            margin-top: 3px;
        }

        .character-avatar {
            width: 150px;
            height: 150px;
            margin: 20px auto;
            background: #667eea;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 60px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .stats {
            margin: 30px 0;
        }

        .stat {
            margin-bottom: 20px;
        }

        .stat span:first-child {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #555;
        }

        .stat span:last-child {
            display: block;
            text-align: right;
            font-size: 14px;
            color: #888;
            margin-top: 3px;
        }

        .bar {
            height: 20px;
            background: #e0e0e0;
            border-radius: 10px;
            overflow: hidden;
        }

        .bar div {
            height: 100%;
            background: #4CAF50;
            transition: width 0.5s;
        }

        .actions {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 20px;
        }

        .actions .btn {
            background: #667eea;
            color: white;
            padding: 15px;
            font-size: 14px;
        }

        .actions .btn:hover {
            background: #5568d3;
        }

        .event {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 100;
            display: none;
        }

        .event-content {
            background: white;
            padding: 30px;
            border-radius: 15px;
            max-width: 400px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .event-actions {
            margin-top: 20px;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .event-actions button {
            padding: 12px;
            font-size: 16px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            background: #667eea;
            color: white;
            font-family: inherit;
        }

        .event-actions button:hover {
            background: #5568d3;
        }

        footer {
            text-align: center;
            margin-top: 20px;
            color: white;
            font-size: 14px;
            opacity: 0.8;
        }
    </style>
</head>
<body>
    <div id="app">
        <!-- –≠–∫—Ä–∞–Ω —Å–æ–∑–¥–∞–Ω–∏—è –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ -->
        <div id="create-screen" class="screen active">
            <h1>üë∂ Life Simulator</h1>
            
            <div class="gender-select">
                <button onclick="createCharacter('male')" class="btn btn-male">
                    üë¶ –ú–∞–ª—å—á–∏–∫
                </button>
                <button onclick="createCharacter('female')" class="btn btn-female">
                    üëß –î–µ–≤–æ—á–∫–∞
                </button>
            </div>
            
            <div class="name-input" id="name-input">
                <input type="text" id="character-name" placeholder="–í–≤–µ–¥–∏—Ç–µ –∏–º—è..." maxlength="15">
                <button onclick="confirmName()" class="btn btn-confirm">–°–æ–∑–¥–∞—Ç—å –ø–µ—Ä—Å–æ–Ω–∞–∂–∞</button>
            </div>
        </div>

        <!-- –≠–∫—Ä–∞–Ω –∏–≥—Ä—ã -->
        <div id="game-screen" class="screen">
            <div class="header">
                <h2 id="character-name-display"></h2>
                <p id="character-age"></p>
                <p id="character-stage"></p>
            </div>

            <div class="character-avatar" id="character-avatar"></div>

            <div class="stats">
                <div class="stat">
                    <span>‚ù§Ô∏è –ó–¥–æ—Ä–æ–≤—å–µ</span>
                    <div class="bar">
                        <div id="health-bar"></div>
                    </div>
                    <span id="health-value">100%</span>
                </div>
                <div class="stat">
                    <span>üòä –ù–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ</span>
                    <div class="bar">
                        <div id="mood-bar"></div>
                    </div>
                    <span id="mood-value">80%</span>
                </div>
                <div class="stat">
                    <span>‚ö° –≠–Ω–µ—Ä–≥–∏—è</span>
                    <div class="bar">
                        <div id="energy-bar"></div>
                    </div>
                    <span id="energy-value">70%</span>
                </div>
                <div class="stat">
                    <span>üò¥ –°–æ–Ω</span>
                    <div class="bar">
                        <div id="sleep-bar"></div>
                    </div>
                    <span id="sleep-value">60%</span>
                </div>
                <div class="stat">
                    <span>üçΩÔ∏è –°—ã—Ç–æ—Å—Ç—å</span>
                    <div class="bar">
                        <div id="hunger-bar"></div>
                    </div>
                    <span id="hunger-value">50%</span>
                </div>
            </div>

            <div class="actions">
                <button onclick="feed()" class="btn">üçº –ü–æ–∫–æ—Ä–º–∏—Ç—å</button>
                <button onclick="sleep()" class="btn">üò¥ –°–ø–∞—Ç—å</button>
                <button onclick="play()" class="btn">üéÆ –ò–≥—Ä–∞—Ç—å</button>
                <button onclick="care()" class="btn">‚ù§Ô∏è –ó–∞–±–æ—Ç–∞</button>
            </div>

            <div class="event" id="event-box">
                <div class="event-content">
                    <h3>‚ùó –°–æ–±—ã—Ç–∏–µ</h3>
                    <p id="event-message"></p>
                    <div class="event-actions" id="event-actions"></div>
                </div>
            </div>
        </div>
    </div>

    <footer>
        üíæ –ò–≥—Ä–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤ –±—Ä–∞—É–∑–µ—Ä–µ
    </footer>

    <script>
        // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
        let character = null;
        let eventInterval = null;
        let stageInterval = null;

        // –≠—Ç–∞–ø—ã –≤–∑—Ä–æ—Å–ª–µ–Ω–∏—è (–¥–ª—è –¥–µ–º–æ: 30 —Å–µ–∫ –Ω–∞ —ç—Ç–∞–ø)
        const stages = [
            { name: '–ú–ª–∞–¥–µ–Ω–µ—Ü', duration: 30000, minAge: 0, maxAge: 3 },
            { name: '–†–µ–±—ë–Ω–æ–∫', duration: 30000, minAge: 3, maxAge: 6 },
            { name: '–ü–æ–¥—Ä–æ—Å—Ç–æ–∫', duration: 30000, minAge: 6, maxAge: 9 },
            { name: '–í–∑—Ä–æ—Å–ª—ã–π', duration: Infinity, minAge: 9, maxAge: 99 }
        ];

        // –°–æ–±—ã—Ç–∏—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —ç—Ç–∞–ø–∞
        const events = {
            '–ú–ª–∞–¥–µ–Ω–µ—Ü': [
                { 
                    message: 'üò≠ –ü–µ—Ä—Å–æ–Ω–∞–∂ –ø–ª–∞—á–µ—Ç! –ß—Ç–æ –¥–µ–ª–∞—Ç—å?', 
                    actions: [
                        { label: '–ü–æ–∫–æ—Ä–º–∏—Ç—å', effect: { hunger: 30, mood: 10 } },
                        { label: '–£–ª–æ–∂–∏—Ç—å —Å–ø–∞—Ç—å', effect: { sleep: 40, energy: 20 } },
                        { label: '–ü–æ–≥–ª–∞–¥–∏—Ç—å', effect: { mood: 25, health: 5 } }
                    ]
                },
                { 
                    message: 'üò¥ –ü–µ—Ä—Å–æ–Ω–∞–∂ —Ö–æ—á–µ—Ç —Å–ø–∞—Ç—å!', 
                    actions: [
                        { label: '–£–ª–æ–∂–∏—Ç—å —Å–ø–∞—Ç—å', effect: { sleep: 50, energy: 30 } },
                        { label: '–ü–æ–∫–∞—á–∞—Ç—å', effect: { mood: 15, sleep: 20 } }
                    ]
                }
            ],
            '–†–µ–±—ë–Ω–æ–∫': [
                { 
                    message: 'üéÆ –ü–µ—Ä—Å–æ–Ω–∞–∂ —Ö–æ—á–µ—Ç –∏–≥—Ä–∞—Ç—å!', 
                    actions: [
                        { label: '–ü–æ–∏–≥—Ä–∞—Ç—å', effect: { mood: 40, energy: -10 } },
                        { label: '–ü—Ä–æ–≥—É–ª—è—Ç—å—Å—è', effect: { mood: 30, health: 10 } }
                    ]
                },
                { 
                    message: 'üìö –ü–µ—Ä—Å–æ–Ω–∞–∂ –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç—Å—è –Ω–æ–≤—ã–º!', 
                    actions: [
                        { label: '–û–±—É—á–∏—Ç—å', effect: { mood: 35, health: 5 } },
                        { label: '–ü—Ä–æ—á–∏—Ç–∞—Ç—å –∫–Ω–∏–≥—É', effect: { mood: 25, energy: -5 } }
                    ]
                }
            ],
            '–ü–æ–¥—Ä–æ—Å—Ç–æ–∫': [
                { 
                    message: 'üò§ –ü–µ—Ä—Å–æ–Ω–∞–∂ —Ä–∞—Å—Å—Ç—Ä–æ–µ–Ω!', 
                    actions: [
                        { label: '–ü–æ–≥–æ–≤–æ—Ä–∏—Ç—å', effect: { mood: 25, health: 5 } },
                        { label: '–î–∞—Ç—å –≤—Ä–µ–º—è', effect: { mood: 15, energy: 10 } }
                    ]
                },
                { 
                    message: 'üë• –ü–µ—Ä—Å–æ–Ω–∞–∂ —Ö–æ—á–µ—Ç –æ–±—â–∞—Ç—å—Å—è!', 
                    actions: [
                        { label: '–û—Ä–≥–∞–Ω–∏–∑–æ–≤–∞—Ç—å –≤—Å—Ç—Ä–µ—á—É', effect: { mood: 30, energy: -10 } },
                        { label: '–ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å', effect: { mood: 20, health: 5 } }
                    ]
                }
            ],
            '–í–∑—Ä–æ—Å–ª—ã–π': [
                { 
                    message: 'üò¥ –ü–µ—Ä—Å–æ–Ω–∞–∂ —É—Å—Ç–∞–ª!', 
                    actions: [
                        { label: '–î–∞—Ç—å –æ—Ç–¥–æ—Ö–Ω—É—Ç—å', effect: { sleep: 45, energy: 30 } },
                        { label: '–ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å', effect: { mood: 25, health: 10 } }
                    ]
                },
                { 
                    message: 'ü§î –ü–µ—Ä—Å–æ–Ω–∞–∂ –¥—É–º–∞–µ—Ç –æ –±—É–¥—É—â–µ–º!', 
                    actions: [
                        { label: '–ü–æ–º–æ—á—å —Å –≤—ã–±–æ—Ä–æ–º', effect: { mood: 30, energy: -5 } },
                        { label: '–î–∞—Ç—å —Å–æ–≤–µ—Ç', effect: { mood: 20, health: 5 } }
                    ]
                }
            ]
        };

        // –°–æ–∑–¥–∞–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞
        function createCharacter(gender) {
            document.querySelector('.gender-select').style.display = 'none';
            document.getElementById('name-input').style.display = 'block';
            document.getElementById('character-name').focus();
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –ø–æ–ª –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
            window.tempGender = gender;
        }

        // –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∏–º–µ–Ω–∏
        function confirmName() {
            const name = document.getElementById('character-name').value.trim();
            
            if (!name) {
                alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –∏–º—è!');
                return;
            }
            
            if (name.length < 2) {
                alert('–ò–º—è –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –Ω–µ –º–µ–Ω–µ–µ 2 —Å–∏–º–≤–æ–ª–æ–≤!');
                return;
            }
            
            // –°–æ–∑–¥–∞—ë–º –ø–µ—Ä—Å–æ–Ω–∞–∂–∞
            character = {
                name: name,
                gender: window.tempGender,
                stage: 0,
                ageMonths: 0,
                createdAt: Date.now(),
                lastSaved: Date.now(),
                
                // –ü–∞—Ä–∞–º–µ—Ç—Ä—ã
                health: 100,
                mood: 80,
                energy: 70,
                sleep: 60,
                hunger: 50,
                
                // –ï–∂–µ—Å–µ–∫—É–Ω–¥–Ω–æ–µ —É–º–µ–Ω—å—à–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
                decayRate: {
                    health: 0.01,
                    mood: 0.03,
                    energy: 0.05,
                    sleep: 0.07,
                    hunger: 0.1
                }
            };
            
            // –ó–∞–ø—É—Å–∫–∞–µ–º –∏–≥—Ä—É
            startGame();
        }

        // –ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã
        function startGame() {
            // –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º —ç–∫—Ä–∞–Ω
            document.getElementById('create-screen').classList.remove('active');
            document.getElementById('game-screen').classList.add('active');
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ
            updateDisplay();
            
            // –ó–∞–ø—É—Å–∫–∞–µ–º —Ç–∞–π–º–µ—Ä—ã
            startTimers();
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ localStorage
            saveGame();
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
        function updateDisplay() {
            if (!character) return;
            
            const stageInfo = stages[character.stage];
            
            // –ò–º—è –∏ –≤–æ–∑—Ä–∞—Å—Ç
            document.getElementById('character-name-display').textContent = character.name;
            document.getElementById('character-age').textContent = `–í–æ–∑—Ä–∞—Å—Ç: ${character.ageMonths} –º–µ—Å—è—Ü–µ–≤`;
            document.getElementById('character-stage').textContent = `–≠—Ç–∞–ø: ${stageInfo.name}`;
            
            // –≠–º–æ–¥–∑–∏ –∞–≤–∞—Ç–∞—Ä–∞
            const avatar = document.getElementById('character-avatar');
            avatar.textContent = character.gender === 'male' ? 'üë¶' : 'üëß';
            
            // –ü–∞—Ä–∞–º–µ—Ç—Ä—ã
            updateStatBar('health', character.health);
            updateStatBar('mood', character.mood);
            updateStatBar('energy', character.energy);
            updateStatBar('sleep', character.sleep);
            updateStatBar('hunger', character.hunger);
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–ª–æ—Å–∫–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞
        function updateStatBar(stat, value) {
            const bar = document.getElementById(`${stat}-bar`);
            const valueEl = document.getElementById(`${stat}-value`);
            
            bar.style.width = `${Math.max(0, Math.min(100, value))}%`;
            
            // –¶–≤–µ—Ç –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∑–Ω–∞—á–µ–Ω–∏—è
            if (value > 70) {
                bar.style.background = '#4CAF50'; // –ó–µ–ª—ë–Ω—ã–π
            } else if (value > 40) {
                bar.style.background = '#FFC107'; // –ñ—ë–ª—Ç—ã–π
            } else {
                bar.style.background = '#F44336'; // –ö—Ä–∞—Å–Ω—ã–π
            }
            
            valueEl.textContent = `${Math.round(value)}%`;
        }

        // –ó–∞–ø—É—Å–∫ —Ç–∞–π–º–µ—Ä–æ–≤
        function startTimers() {
            // –¢–∞–π–º–µ—Ä —É–º–µ–Ω—å—à–µ–Ω–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ (–∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É)
            setInterval(() => {
                if (!character) return;
                
                // –£–º–µ–Ω—å—à–∞–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
                character.health -= character.decayRate.health;
                character.mood -= character.decayRate.mood;
                character.energy -= character.decayRate.energy;
                character.sleep -= character.decayRate.sleep;
                character.hunger -= character.decayRate.hunger;
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∑–¥–æ—Ä–æ–≤—å–µ
                if (character.health <= 0) {
                    gameOver();
                    return;
                }
                
                // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏—è
                character.health = Math.max(0, Math.min(100, character.health));
                character.mood = Math.max(0, Math.min(100, character.mood));
                character.energy = Math.max(0, Math.min(100, character.energy));
                character.sleep = Math.max(0, Math.min(100, character.sleep));
                character.hunger = Math.max(0, Math.min(100, character.hunger));
                
                updateDisplay();
                saveGame();
            }, 1000);
            
            // –¢–∞–π–º–µ—Ä —Å–æ–±—ã—Ç–∏–π (–∫–∞–∂–¥—ã–µ 15-30 —Å–µ–∫—É–Ω–¥)
            eventInterval = setInterval(() => {
                if (!character) return;
                
                // 30% —à–∞–Ω—Å —Å–æ–±—ã—Ç–∏—è
                if (Math.random() < 0.3) {
                    triggerRandomEvent();
                }
            }, 15000);
            
            // –¢–∞–π–º–µ—Ä —Å–º–µ–Ω—ã —ç—Ç–∞–ø–æ–≤
            stageInterval = setInterval(() => {
                checkStageProgress();
            }, 1000);
        }

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ —ç—Ç–∞–ø–∞
        function checkStageProgress() {
            if (!character) return;
            
            const stageInfo = stages[character.stage];
            
            if (stageInfo.duration === Infinity) return;
            
            const timePassed = Date.now() - character.createdAt;
            
            if (timePassed >= stageInfo.duration) {
                // –ü–µ—Ä–µ—Ö–æ–¥–∏–º –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π —ç—Ç–∞–ø
                if (character.stage < stages.length - 1) {
                    character.stage++;
                    character.createdAt = Date.now();
                    
                    alert(`üéâ ${character.name} –≤—ã—Ä–æ—Å(–ª–∞)!\n–ù–æ–≤—ã–π —ç—Ç–∞–ø: ${stages[character.stage].name}`);
                    
                    updateDisplay();
                    saveGame();
                }
            }
        }

        // –°–ª—É—á–∞–π–Ω–æ–µ —Å–æ–±—ã—Ç–∏–µ
        function triggerRandomEvent() {
            if (!character) return;
            
            const stageInfo = stages[character.stage];
            const stageEvents = events[stageInfo.name];
            
            if (!stageEvents || stageEvents.length === 0) return;
            
            const event = stageEvents[Math.floor(Math.random() * stageEvents.length)];
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–±—ã—Ç–∏–µ
            const eventBox = document.getElementById('event-box');
            const eventMessage = document.getElementById('event-message');
            const eventActions = document.getElementById('event-actions');
            
            eventMessage.textContent = event.message;
            eventActions.innerHTML = '';
            
            event.actions.forEach(action => {
                const btn = document.createElement('button');
                btn.textContent = action.label;
                btn.onclick = () => handleEventAction(action.effect);
                eventActions.appendChild(btn);
            });
            
            eventBox.style.display = 'flex';
        }

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–µ–π—Å—Ç–≤–∏—è —Å–æ–±—ã—Ç–∏—è
        function handleEventAction(effect) {
            if (!character) return;
            
            // –ü—Ä–∏–º–µ–Ω—è–µ–º —ç—Ñ—Ñ–µ–∫—Ç—ã
            Object.keys(effect).forEach(param => {
                character[param] = Math.max(0, Math.min(100, character[param] + effect[param]));
            });
            
            // –°–∫—Ä—ã–≤–∞–µ–º —Å–æ–±—ã—Ç–∏–µ
            document.getElementById('event-box').style.display = 'none';
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ
            updateDisplay();
            saveGame();
        }

        // –î–µ–π—Å—Ç–≤–∏—è –∏–≥—Ä–æ–∫–∞
        function feed() {
            if (!character) return;
            character.hunger = Math.min(100, character.hunger + 30);
            character.health = Math.min(100, character.health + 5);
            updateDisplay();
            saveGame();
        }

        function sleep() {
            if (!character) return;
            character.sleep = Math.min(100, character.sleep + 40);
            character.energy = Math.min(100, character.energy + 30);
            updateDisplay();
            saveGame();
        }

        function play() {
            if (!character) return;
            character.mood = Math.min(100, character.mood + 25);
            character.energy = Math.max(0, character.energy - 10);
            updateDisplay();
            saveGame();
        }

        function care() {
            if (!character) return;
            character.mood = Math.min(100, character.mood + 20);
            character.health = Math.min(100, character.health + 10);
            updateDisplay();
            saveGame();
        }

        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–≥—Ä—ã
        function saveGame() {
            if (!character) return;
            localStorage.setItem('lifeSimulatorSave', JSON.stringify(character));
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ –∏–≥—Ä—ã
        function loadGame() {
            const saved = localStorage.getItem('lifeSimulatorSave');
            if (saved) {
                character = JSON.parse(saved);
                
                // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∏–≥—Ä—É
                document.getElementById('create-screen').classList.remove('active');
                document.getElementById('game-screen').classList.add('active');
                
                updateDisplay();
                startTimers();
            }
        }

        // –ö–æ–Ω–µ—Ü –∏–≥—Ä—ã
        function gameOver() {
            clearInterval(eventInterval);
            clearInterval(stageInterval);
            
            alert(`üíÄ ${character.name} —É–º–µ—Ä(–ª–∞)...\n–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–∫–æ–Ω—á–∏–ª–∏—Å—å.\n–ù–∞—á–Ω–∏—Ç–µ –Ω–æ–≤—É—é –∏–≥—Ä—É!`);
            
            // –£–¥–∞–ª—è–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
            localStorage.removeItem('lifeSimulatorSave');
            
            // –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º —Å—Ç—Ä–∞–Ω–∏—Ü—É
            location.reload();
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
        window.onload = loadGame;
    </script>
</body>
</html>
